(function(e,t){var a=t.getElementById("layout"),o=t.getElementById("menu"),n=t.querySelector('[data-js="menu-toggle"]'),r=t.getElementById("main"),i=t.body;if(!a||!o||!r)return;function s(e,t){for(var n=e.className.split(/\s+/),o=n.length,s=0;s<o;s++)if(n[s]===t){n.splice(s,1);break}o===n.length&&n.push(t),e.className=n.join(" ")}function c(e){var t="active";e.preventDefault(),s(a,t),s(o,t),n&&s(n,t),s(i,t)}n&&(n.onclick=function(e){c(e),i.classList.add("menuTransition"),setTimeout(function(){i.classList.remove("menuTransition")},1e3)}),r.onclick=function(e){o.className.indexOf("active")!==-1&&c(e)}})(this,this.document),function(){let t=window.scrollY;const e=document.querySelector('[data-js="top-menu"]')||document.querySelector("#topmenu");if(!e)return;const n=e.offsetHeight,s=()=>e.classList.add("bottom-line"),o=()=>e.classList.remove("bottom-line");window.addEventListener("scroll",function(){t=window.scrollY,t>=n?s():o()})}(),function(){var e,o,r=document.documentElement,c=window,i=c.scrollY||r.scrollTop,n=0,a=0,t=0,s=document.getElementById("topmenu"),l=300,d=200,u=function(){e=c.scrollY||r.scrollTop,e>i?n=2:n=1,n!==a?o=h():t=e,i=e,o&&(a=n)},h=function(){return o=!0,document.getElementById("layout").classList.contains("active")?(t=e,s.classList.remove("hide")):n===2&&e<10?(t=e,s.classList.add("relative")):n===2&&e-t>l?(t=e,s.classList.add("hide"),s.classList.remove("relative")):n===1&&t-e>d?(t=e,s.classList.remove("hide"),s.classList.remove("relative")):o=!1,o};window.addEventListener("scroll",u)}(),function(){"use strict";let n,e,t,o,i,a;function h(s){s&&s.stopPropagation();const o=e.hasAttribute("hidden");o?(e.removeAttribute("hidden"),t&&t.removeAttribute("hidden"),n.setAttribute("aria-expanded","true")):(e.setAttribute("hidden",""),t&&t.setAttribute("hidden",""),n.setAttribute("aria-expanded","false"))}function s(){e&&!e.hasAttribute("hidden")&&(e.setAttribute("hidden",""),t&&t.setAttribute("hidden",""),n.setAttribute("aria-expanded","false"))}function c(e){localStorage.setItem("theme-mode",e),r(e),l(e),s()}function r(e){if(e==="system"){const e=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";document.documentElement.setAttribute("data-mode",e)}else document.documentElement.setAttribute("data-mode",e);f(e),p()}function l(e){i.forEach(t=>{const n=t.getAttribute("data-mode");n===e?(t.classList.add("active"),t.setAttribute("aria-current","true")):(t.classList.remove("active"),t.removeAttribute("aria-current"))})}function m(e){localStorage.setItem("theme-palette",e),d(e),u(e),s()}function d(e){document.documentElement.setAttribute("data-palette",e)}function u(e){a.forEach(t=>{const n=t.getAttribute("data-palette");n===e?(t.classList.add("active"),t.setAttribute("aria-current","true")):(t.classList.remove("active"),t.removeAttribute("aria-current"))})}function f(e){if(!o)return;let t="";e==="light"?t="/img/svg/light.svg":e==="dark"?t="/img/svg/dark.svg":e==="system"&&(t="/img/svg/system.svg"),fetch(t).then(e=>e.text()).then(e=>{const n=new DOMParser,s=n.parseFromString(e,"image/svg+xml"),t=s.documentElement;t.setAttribute("width","24"),t.setAttribute("height","24"),o.innerHTML="",o.appendChild(t)}).catch(e=>console.warn("Failed to load theme icon:",e))}function p(){const e=document.querySelector('meta[name="theme-color"]');if(!e)return;const t=document.documentElement.getAttribute("data-mode");t==="dark"?e.setAttribute("content","#18181b"):e.setAttribute("content","#FFFFFF")}window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",()=>{const e=localStorage.getItem("theme-mode")||"system";e==="system"&&r("system")}),document.addEventListener("DOMContentLoaded",function(){n=document.querySelector('[data-js="theme-toggle"]'),e=document.querySelector('[data-js="theme-panel"]'),t=document.querySelector('[data-js="theme-overlay"]'),o=document.querySelector('[data-js="theme-icon"]'),i=document.querySelectorAll('[data-js="mode-option"]'),a=document.querySelectorAll('[data-js="palette-option"]');const f=localStorage.getItem("theme-mode")||"system",p=localStorage.getItem("theme-palette")||"standard";r(f),d(p),l(f),u(p),n&&e&&(n.addEventListener("click",h),t&&t.addEventListener("click",s),document.addEventListener("click",function(t){!n.contains(t.target)&&!e.contains(t.target)&&s()}),document.addEventListener("keydown",function(e){e.key==="Escape"&&s()})),i.forEach(e=>{e.addEventListener("click",function(){const e=this.getAttribute("data-mode");c(e)})}),a.forEach(e=>{e.addEventListener("click",function(){const e=this.getAttribute("data-palette");m(e)})})}),window.setTheme=c}(),function(){"use strict";document.addEventListener("DOMContentLoaded",function(){const t=document.querySelector(".language-toggle"),e=document.querySelector(".language-panel");if(!t||!e)return;function s(n){n.stopPropagation();const s=e.hasAttribute("hidden");s?(e.removeAttribute("hidden"),t.setAttribute("aria-expanded","true")):(e.setAttribute("hidden",""),t.setAttribute("aria-expanded","false"))}function n(){e&&!e.hasAttribute("hidden")&&(e.setAttribute("hidden",""),t.setAttribute("aria-expanded","false"))}t.addEventListener("click",s),document.addEventListener("click",function(s){!t.contains(s.target)&&!e.contains(s.target)&&n()}),document.addEventListener("keydown",function(e){e.key==="Escape"&&n()})})}(),function(){"use strict";const e={PARAM_VIEW:"view",PARAM_REF:"ref",VIEW_CLIENT:"client",VIEW_EMPLOYER:"employer",LAYOUT_ID:"layout",CLASS_CLIENTPAGE:"clientpage",CLASS_EMPLOYERPAGE:"employerpage"};function a(){try{return new URLSearchParams(window.location.search)}catch(e){return console.error("Focus mode: Error parsing URL parameters",e),new URLSearchParams}}function t(){const n=a(),s=n.get(e.PARAM_VIEW),o=n.get("source"),t=window.location.pathname,i=t.includes("/clients/"),c=t.includes("/employer")||t.includes("/arbetsgivare");return s===e.VIEW_CLIENT||o==="client"||i?{type:e.VIEW_CLIENT,ref:n.get(e.PARAM_REF)||r(t,"clients")}:s===e.VIEW_EMPLOYER||c?{type:e.VIEW_EMPLOYER,ref:null}:null}function r(e,t){const s=new RegExp(`/${t}/([^/]+)`),n=e.match(s);return n?n[1]:null}function c(t){const n=document.getElementById(e.LAYOUT_ID);if(!n){console.warn("Focus mode: Layout element not found");return}t.type===e.VIEW_CLIENT?(n.classList.add(e.CLASS_CLIENTPAGE),console.log("Focus mode: Client mode activated",t.ref||"")):t.type===e.VIEW_EMPLOYER&&(n.classList.add(e.CLASS_EMPLOYERPAGE),console.log("Focus mode: Employer mode activated"))}function d(t){const n=new URLSearchParams;return n.set(e.PARAM_VIEW,t.type),t.ref&&n.set(e.PARAM_REF,t.ref),n.toString()}function n(t){const n=document.querySelectorAll('a[href^="/"], a[href^="./"], a[href^="../"]');n.forEach(n=>{try{const o=n.getAttribute("href");if(!o||o.startsWith("#")||n.hasAttribute("data-focus-processed"))return;const s=new URL(o,window.location.origin),i=new URLSearchParams(s.search);i.set(e.PARAM_VIEW,t.type),t.ref&&i.set(e.PARAM_REF,t.ref),s.search=i.toString(),n.setAttribute("href",s.pathname+s.search+s.hash),n.setAttribute("data-focus-processed","true")}catch{}})}function s(t){t.type===e.VIEW_CLIENT&&t.ref&&l(t.ref)}function l(e){const t=document.querySelector('[data-js="application-breadcrumb-back"]')||document.getElementById("client-breadcrumb-back");if(!t)return;for(;t.firstChild;)t.removeChild(t.firstChild);const n=document.createElement("a"),s=`/clients/${encodeURIComponent(e)}/`;n.setAttribute("href",s);const o=decodeURIComponent(e).replace(/-/g," ");n.textContent=o,t.appendChild(n)}function o(t){if(t.type!==e.VIEW_CLIENT||!t.ref)return;const n=`/clients/${encodeURIComponent(t.ref)}/`,s={"application-toc-letter":`${n}#letter`,"application-toc-portfolio":`${n}#portfolio`,"application-toc-cv":`${n}#cv`,"application-toc-download":`${n}#download`,"application-toc-contact":`${n}#contact`};Object.entries(s).forEach(([e,t])=>{const n=document.querySelector(`[data-js="${e}"]`);n&&n.setAttribute("href",t)})}function i(){const e=t();if(!e){console.log("Focus mode: Standard mode (no focus context)");return}c(e),document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>{n(e),s(e),o(e)}):(n(e),s(e),o(e))}i(),window.FocusMode={getContext:t,refresh:i}}(),window.onscroll=function(){progressBar()};const brandParts=Array.from(document.querySelectorAll('[data-brand-part="true"]')),hyphenLeft=document.querySelector('[data-js="brand-hyphen-left"]'),hyphenRight=document.querySelector('[data-js="brand-hyphen-right"]'),brandLink=document.querySelector('[data-js="brand-link"]'),brandBase=brandParts.reduce((e,t)=>e+t.offsetWidth,0),brandWidth=brandBase+5+"px";function progressBar(){if(!hyphenLeft||!hyphenRight||!brandLink)return;var e=document.body.scrollTop||document.documentElement.scrollTop,t=document.documentElement.scrollHeight-document.documentElement.clientHeight,s=e/t*30+"%",o=e/t*70+"%",n=e/t*5.4+"rem",i=e/t*100+"%",a=1-e/t;hyphenLeft.style.width="calc("+s+" - "+n+")",hyphenRight.style.width="calc("+o+" - "+n+")",brandLink.style.width="calc("+brandWidth+" * "+a+" + "+i+")"}(function(){"use strict";document.addEventListener("DOMContentLoaded",function(){const e=document.querySelectorAll('a[href*="#"]');if(e.forEach(e=>{e.addEventListener("click",function(e){const t=this.getAttribute("href");if(!t||t==="#")return;try{const o=new URL(t,window.location.href),i=o.pathname===window.location.pathname||t.startsWith("#");if(!i)return;const n=t.includes("#")?t.split("#")[1]:null;if(!n)return;const s=document.getElementById(n);s&&(e.preventDefault(),s.scrollIntoView({behavior:"smooth",block:"start"}),window.history.pushState?window.history.pushState(null,null,"#"+n):window.location.hash=n,s.setAttribute("tabindex","-1"),s.focus())}catch(e){console.warn("Smooth scroll: URL parsing failed",e)}})}),window.location.hash){const t=window.location.hash.slice(1),e=document.getElementById(t);e&&setTimeout(()=>{e.scrollIntoView({behavior:"smooth",block:"start"}),e.setAttribute("tabindex","-1"),e.focus()},100)}})})()