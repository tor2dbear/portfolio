const brandMark=document.querySelector('[data-js="brand-mark"]'),brandLineLeft=document.querySelector('[data-js="brand-line-left"]'),brandLineRight=document.querySelector('[data-js="brand-line-right"]'),brandLoop=document.querySelector('[data-js="brand-loop"]'),brandWords=Array.from(document.querySelectorAll(".brand__word")),rootElement=document.documentElement;let brandReady=!1,rafId=null;const loopWidth=24,loopHeight=24;let leftMaxPx=0,rightMaxPx=0;function updateMetrics(){const t=brandMark?brandMark.parentElement:null,e=t?t.closest(".top-menu__container"):null,n=e?e.querySelector(".top-menu__nav"):null,i=e?e.offsetWidth:t?t.offsetWidth:0,a=n?n.offsetWidth:0,s=e?parseFloat(getComputedStyle(e).columnGap):0,r=Number.isNaN(s)?0:s,c=Math.max(0,i-a-r),l=brandWords.reduce((e,t)=>e+t.offsetWidth,0),d=Math.max(0,c-l),o=Math.max(0,d-loopWidth);leftMaxPx=o*.3,rightMaxPx=o*.7}function markBrandReady(){if(!rootElement||brandReady)return;brandReady=!0,rootElement.setAttribute("data-brand-ready","true")}function scheduleProgressUpdate(){if(rafId!==null)return;rafId=requestAnimationFrame(()=>{rafId=null,progressBar()})}function progressBar(){if(!brandMark||!brandLineLeft||!brandLineRight||!brandLoop)return;var i=document.body.scrollTop||document.documentElement.scrollTop,s=document.documentElement.scrollHeight-document.documentElement.clientHeight,e=s>0?i/s:0,e=Math.min(Math.max(e,0),1);const a=typeof window.matchMedia=="function"&&window.matchMedia("(max-width: 47.9375em)").matches;a&&(e=0);const t=leftMaxPx*e,r=rightMaxPx*e,o=loopWidth+t+r,n=Math.max(loopWidth,Number.isFinite(o)?o:loopWidth);brandMark.style.width=n+"px",brandMark.setAttribute("viewBox","0 0 "+n+" "+loopHeight),brandLineLeft.setAttribute("x2",t.toFixed(2)),brandLineRight.setAttribute("x1",(t+loopWidth).toFixed(2)),brandLineRight.setAttribute("x2",n.toFixed(2)),brandLoop.setAttribute("transform","translate("+t.toFixed(2)+" 0)"),markBrandReady()}function syncBrand(){updateMetrics(),progressBar()}function settleBrand(e=12){if(e<=0)return;syncBrand(),requestAnimationFrame(()=>{settleBrand(e-1)})}rootElement&&rootElement.setAttribute("data-brand-ready","false"),window.onscroll=function(){scheduleProgressUpdate()},updateMetrics(),requestAnimationFrame(syncBrand),document.fonts&&document.fonts.ready&&document.fonts.ready.then(()=>settleBrand(6)),window.addEventListener("load",()=>{settleBrand(12),setTimeout(()=>settleBrand(6),150)}),window.addEventListener("pageshow",()=>settleBrand(12)),window.addEventListener("resize",syncBrand),window.addEventListener("scroll",scheduleProgressUpdate,{passive:!0})