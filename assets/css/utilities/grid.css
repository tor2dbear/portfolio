/* ==========================================================================
   GRID SYSTEM
   12-column subgrid with art-direction API
   ========================================================================== */

/* --- Page grid (root) --------------------------------------------------- */

.page-grid {
  display: grid;
  grid-template-columns:
    [full-start] var(--size-page-margins) [content-start] repeat(12, [col-start] 1fr) [content-end] var(--size-page-margins) [full-end];
  column-gap: var(--spacing-24);
  row-gap: var(--spacing-32);
}

/* --- Subgrid container -------------------------------------------------- */

.use-subgrid {
  display: grid;
  grid-column: content-start / content-end;
}

@supports not (grid-template-columns: subgrid) {
  .use-subgrid {
    grid-template-columns: repeat(12, [col-start] 1fr);
    column-gap: var(--spacing-24);
  }
}

@supports (grid-template-columns: subgrid) {
  .use-subgrid {
    grid-template-columns: subgrid;
  }
}

/* sm: <= 47.9375em */
@media (max-width: 47.9375em) {
  @supports not (grid-template-columns: subgrid) {
    .use-subgrid {
      grid-template-columns: repeat(4, [col-start] 1fr);
      column-gap: var(--spacing-16);
    }
  }

  .use-subgrid .col-span-5,
  .use-subgrid .col-span-6,
  .use-subgrid .col-span-7,
  .use-subgrid .col-span-8,
  .use-subgrid .col-span-9,
  .use-subgrid .col-span-10,
  .use-subgrid .col-span-11,
  .use-subgrid .col-span-12 {
    grid-column-end: span 4;
  }
}

/* ==========================================================================
   ART-DIRECTION API
   Variable-driven placement for editorial grid control.

   Any child of .use-subgrid can be placed via:
     style="--col: col-start 3 / span 8;"
   or via a preset class (.place-prose, .place-wide, etc.)

   Responsive overrides:
     --col       Desktop (default)
     --col-md    Tablet (≤63.9375em), falls back to --col
     --col-sm    Mobile (≤47.9375em), falls back to full width
   ========================================================================== */

.use-subgrid > [style*="--col"],
.use-subgrid > .place-full,
.use-subgrid > .place-wide,
.use-subgrid > .place-prose,
.use-subgrid > .place-narrow,
.use-subgrid > .place-inset,
.use-subgrid > .place-aside,
.use-subgrid > .place-aside-left,
.use-subgrid > .place-bleed {
  grid-column: var(--col);
  grid-row: var(--row, auto);
}

/* md: tablet override, falls back to --col if --col-md is not set */
@media (max-width: 63.9375em) {
  .use-subgrid > [style*="--col"],
  .use-subgrid > .place-full,
  .use-subgrid > .place-wide,
  .use-subgrid > .place-prose,
  .use-subgrid > .place-narrow,
  .use-subgrid > .place-inset,
  .use-subgrid > .place-aside,
  .use-subgrid > .place-aside-left,
  .use-subgrid > .place-bleed {
    grid-column: var(--col-md, var(--col));
  }
}

/* sm: collapse art-directed items to full width unless --col-sm is set */
@media (max-width: 47.9375em) {
  .use-subgrid > [style*="--col"],
  .use-subgrid > .place-full,
  .use-subgrid > .place-wide,
  .use-subgrid > .place-prose,
  .use-subgrid > .place-narrow,
  .use-subgrid > .place-inset,
  .use-subgrid > .place-aside,
  .use-subgrid > .place-aside-left,
  .use-subgrid > .place-bleed {
    grid-column: var(--col-sm, col-start 1 / -1);
  }
}

/* --- Placement presets -------------------------------------------------- */

.place-full       { --col: col-start 1  / span 12; }
.place-wide       { --col: col-start 1  / span 10; }
.place-prose      { --col: col-start 1  / span 8;  }
.place-narrow     { --col: col-start 2  / span 8;  }
.place-inset      { --col: col-start 3  / span 8;  }
.place-aside      { --col: col-start 9  / span 4;  }
.place-aside-left { --col: col-start 1  / span 4;  }
.place-bleed      { --col: full-start / full-end;   }

/* ==========================================================================
   STEPPED TEXT — "tripp-trapp-trull" editorial pattern

   Usage:
     <div class="use-subgrid stepped-3-3">
       <p>Line one</p>
       <p>Line two</p>
       <p>Line three</p>
     </div>

   Each child occupies its own grid row (auto).
   Named variants encode offset + span: .stepped-{offset}-{span}
   ========================================================================== */

/* offset 2, span 4 (overlapping staircase) */
.stepped-2-4 > :nth-child(1) { --col: col-start 1 / span 4; --row: 1; }
.stepped-2-4 > :nth-child(2) { --col: col-start 3 / span 4; --row: 2; }
.stepped-2-4 > :nth-child(3) { --col: col-start 5 / span 4; --row: 3; }
.stepped-2-4 > :nth-child(4) { --col: col-start 7 / span 4; --row: 4; }
.stepped-2-4 > :nth-child(5) { --col: col-start 9 / span 4; --row: 5; }

/* offset 3, span 3 (clean staircase, no overlap) */
.stepped-3-3 > :nth-child(1) { --col: col-start 1  / span 3; --row: 1; }
.stepped-3-3 > :nth-child(2) { --col: col-start 4  / span 3; --row: 2; }
.stepped-3-3 > :nth-child(3) { --col: col-start 7  / span 3; --row: 3; }
.stepped-3-3 > :nth-child(4) { --col: col-start 10 / span 3; --row: 4; }

/* offset 4, span 4 (wide non-overlapping staircase) */
.stepped-4-4 > :nth-child(1) { --col: col-start 1 / span 4; --row: 1; }
.stepped-4-4 > :nth-child(2) { --col: col-start 5 / span 4; --row: 2; }
.stepped-4-4 > :nth-child(3) { --col: col-start 9 / span 4; --row: 3; }

/* offset 6, span 6 (two-block diagonal) */
.stepped-6-6 > :nth-child(1) { --col: col-start 1 / span 6; --row: 1; }
.stepped-6-6 > :nth-child(2) { --col: col-start 7 / span 6; --row: 2; }

/* offset 1, span 6 (wide blocks, slow drift) */
.stepped-1-6 > :nth-child(1) { --col: col-start 1 / span 6; --row: 1; }
.stepped-1-6 > :nth-child(2) { --col: col-start 2 / span 6; --row: 2; }
.stepped-1-6 > :nth-child(3) { --col: col-start 3 / span 6; --row: 3; }
.stepped-1-6 > :nth-child(4) { --col: col-start 4 / span 6; --row: 4; }
.stepped-1-6 > :nth-child(5) { --col: col-start 5 / span 6; --row: 5; }
.stepped-1-6 > :nth-child(6) { --col: col-start 6 / span 6; --row: 6; }
.stepped-1-6 > :nth-child(7) { --col: col-start 7 / span 6; --row: 7; }

/* md: allow stepped overrides at tablet */
@media (max-width: 63.9375em) {
  [class*="stepped-"] > * {
    grid-column: var(--col-md, var(--col));
  }

  /* stepped-6-6: widen to 8 cols at tablet */
  .stepped-6-6 > :nth-child(1) { --col-md: col-start 1 / span 8; }
  .stepped-6-6 > :nth-child(2) { --col-md: col-start 5 / span 8; }
}

/* sm: collapse stepped layouts to full width */
@media (max-width: 47.9375em) {
  [class*="stepped-"] > * {
    --col: col-start 1 / -1;
  }
}

/* ==========================================================================
   ROW BEHAVIOUR
   Rows remain content-driven by default (auto).
   Never use grid-auto-rows: 1fr — it equalises rows and causes overlap.
   ========================================================================== */

.grid-rows-auto    { grid-auto-rows: auto; }
.grid-rows-content { grid-auto-rows: max-content; }

/* ==========================================================================
   LEGACY UTILITIES
   Kept for backward compatibility. Prefer .place-* presets or --col.
   ========================================================================== */

.col-full {
  grid-column: full-start / full-end;
}

.col-content {
  grid-column: content-start / content-end;
}

.grid-cols-2 {
  display: grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  column-gap: var(--spacing-24);
  row-gap: var(--spacing-24);
}

.col-span-1 {
  grid-column-end: span 1;
}

.col-span-2 {
  grid-column-end: span 2;
}

.col-span-3 {
  grid-column-end: span 3;
}

.col-span-4 {
  grid-column-end: span 4;
}

.col-span-5 {
  grid-column-end: span 5;
}

.col-span-6 {
  grid-column-end: span 6;
}

.col-span-7 {
  grid-column-end: span 7;
}

.col-span-8 {
  grid-column-end: span 8;
}

.col-span-9 {
  grid-column-end: span 9;
}

.col-span-10 {
  grid-column-end: span 10;
}

.col-span-11 {
  grid-column-end: span 11;
}

.col-span-12 {
  grid-column-end: span 12;
}

.col-start-1 {
  grid-column-start: 1;
  grid-column-start: col-start 1;
}

.col-start-2 {
  grid-column-start: 2;
  grid-column-start: col-start 2;
}

.col-start-3 {
  grid-column-start: 3;
  grid-column-start: col-start 3;
}

.col-start-4 {
  grid-column-start: 4;
  grid-column-start: col-start 4;
}

.col-start-5 {
  grid-column-start: 5;
  grid-column-start: col-start 5;
}

.col-start-6 {
  grid-column-start: 6;
  grid-column-start: col-start 6;
}

.col-start-7 {
  grid-column-start: 7;
  grid-column-start: col-start 7;
}

.col-start-8 {
  grid-column-start: 8;
  grid-column-start: col-start 8;
}

.col-start-9 {
  grid-column-start: 9;
  grid-column-start: col-start 9;
}

.col-start-10 {
  grid-column-start: 10;
  grid-column-start: col-start 10;
}

.col-start-11 {
  grid-column-start: 11;
  grid-column-start: col-start 11;
}

.col-start-12 {
  grid-column-start: 12;
  grid-column-start: col-start 12;
}