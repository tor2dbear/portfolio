{{ partial "header.html" . }}

<div class="home-page">
  <section id="hero" class="home-section hero-section">
    {{ partial "startpage.html" . }}
  </section>

  <section id="works" class="home-section works-section">
    <div class="content startpage use-subgrid">
      <div class="post-header mb-8 col-span-12">
        <h2 class="type-headline-small">{{ i18n "Featured" }}</h2>
      </div>
      {{ range $index, $page := first 6 (where (where (where .Site.RegularPages "Type" "works") ".Params.featured" "=" true) ".Params.hidden" "!=" true) }}
        {{ $isWide := or (eq $index 0) (eq $index 3) (eq $index 4) }}
        <div class="{{ if $isWide }}col-span-8 summary-card--wide{{ else }}col-span-4 summary-card--compact{{ end }}">
          {{ $page.Render "summary" }}
        </div>
      {{ end }}
    </div>
  </section>

  <section id="about" class="home-section about-section">
    <h2 class="section-heading">{{ i18n "about_me" }}</h2>
    <div class="about-content use-subgrid">
      {{ $aboutPartial := printf "about_main_%s.html" .Language.Lang }}
      {{ partial $aboutPartial . }}
      {{ partial "about_cv.html" . }}
    </div>
  </section>

  <section id="contact" class="home-section contact-section">
    <h2 class="section-heading">{{ i18n "contact_me" }}</h2>
    <div class="contact-content use-subgrid">
      {{ with .Site.GetPage "/about" }}
        <figure class="contact-portrait col-start-7 col-span-6">
          {{ partial "headerimage.html" . }}
        </figure>
      {{ end }}
      {{ partial "contact_info.html" . }}
    </div>
  </section>

  <section id="subscribe" class="home-section subscribe-section">
    <div class="breakout col-full">
      {{ partial "subscribe.html" . }}
    </div>
  </section>
</div>

{{ partial "footer.html" . }}
