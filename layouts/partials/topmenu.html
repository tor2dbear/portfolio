<header id="topmenu" class="top-menu" data-js="top-menu">
  <div class="top-menu__container">
    {{ partial "brand.html" . }}
    <nav class="top-menu__nav" aria-label="{{ i18n "menu_title" }}">
      <ul class="top-menu__list">
        {{- $urltop := .RelPermalink -}}
        {{- $homeURL := "/" | relLangURL -}}
        {{- range .Site.Menus.top -}}
          {{- $nameLower := lower .Name -}}
          {{- $isContact := or (eq .Identifier "contact") (eq $nameLower "contact") (eq $nameLower "kontakt") -}}
          {{- if not $isContact -}}
            {{- $linkURL := .URL | relLangURL -}}
          <li class="top-menu__item top-menu__item--nav" data-menu-id="{{ .Identifier }}">
            <a
              class="top-menu__link {{ if eq $urltop $linkURL }}active{{ end }}"
              title="{{ .Name }}"
              href="{{ $linkURL }}"
            >{{ .Name }}</a>
          </li>
          {{- end -}}
        {{- end -}}

        {{- /* Theme dropdown (mode + palette) */ -}}
        <li class="top-menu__item top-menu__item--theme">
          {{ partial "theme-dropdown.html" . }}
        </li>

        {{- /* Language dropdown */ -}}
        <li class="top-menu__item top-menu__item--language">
          {{ partial "language-dropdown.html" . }}
        </li>

        {{- /* Settings dropdown (xs only) */ -}}
        <li class="top-menu__item top-menu__item--settings">
          {{ partial "settings-dropdown.html" . }}
        </li>

        {{- /* Contact button */ -}}
        <li class="top-menu__item top-menu__item--contact">
          <a
            class="top-menu__link top-menu__link--button"
            href="{{ "/contact" | relLangURL }}"
            aria-label="{{ i18n "contact_me" }}"
          >
            <span
              class="top-menu__label top-menu__label--long"
              data-focus-label="{{ i18n "contact_me_focus" }}"
              data-focus-label-template="{{ i18n "to_client" }}"
              data-focus-label-default="{{ i18n "contact_me" }}"
            >{{ i18n "contact_me" }}</span>
            <span class="top-menu__label top-menu__label--icon" aria-hidden="true">
              <span class="top-menu__icon top-menu__icon--contact" data-focus-icon="contact-default">
                {{ readFile "static/img/svg/contact.svg" | safeHTML }}
              </span>
              <svg class="icon icon--sm top-menu__icon top-menu__icon--profile" data-focus-icon="contact-profile">
                <use href="{{ "/img/svg/sprite.svg?v=20260211b" | relURL }}#icon-profile-male"></use>
              </svg>
            </span>
          </a>
        </li>
      </ul>
    </nav>
  </div>
  {{ $jsProgress := resources.Get "js/progressbar.js" }}
  {{ if eq hugo.Environment "development" }}
    <script src="{{ $jsProgress.Permalink }}"></script>
  {{ else }}
    {{ $jsProgressMin := $jsProgress | minify | fingerprint }}
    <script src="{{ $jsProgressMin.Permalink }}"></script>
  {{ end }}
</header>
