<!DOCTYPE html>
<html lang="{{ .Site.Language.Lang }}">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Portfolio - {{ .Params.company_name | title }} | {{ .Site.Title }}</title>
  <meta name="robots" content="noindex, nofollow">

  {{ $style := resources.Get "css/style.css" }}
  {{ $print := resources.Get "css/print.css" }}
  {{ $css := slice $style $print | resources.Concat "portfolio-print.css" }}
  <link rel="stylesheet" type="text/css" href="{{ $css.Permalink }}" media="all" />

  <style>
    /* Portfolio print specific styles */
    @media screen {
      body {
        max-width: 800px;
        margin: 0 auto;
        padding: 2rem;
      }
    }

    .portfolio-print-header {
      margin-bottom: 3rem;
      padding-bottom: 1.5rem;
      border-bottom: 2px solid #333;
    }

    .portfolio-print-header__title {
      font-size: 24pt;
      margin-bottom: 0.5rem;
    }

    .portfolio-print-header__subtitle {
      font-size: 12pt;
      color: #666;
    }

    .portfolio-print-nav {
      margin-bottom: 2rem;
      padding: 1rem;
      background: #f5f5f5;
      display: flex;
      gap: 1rem;
      align-items: center;
    }

    .portfolio-print-nav a {
      color: #333;
      text-decoration: none;
    }

    .portfolio-print-nav a:hover {
      text-decoration: underline;
    }

    .portfolio-print-nav__print-btn {
      margin-left: auto;
      padding: 0.5rem 1rem;
      background: #333;
      color: #fff !important;
      border: none;
      cursor: pointer;
      font-size: 14px;
    }

    .portfolio-print-nav__print-btn:hover {
      background: #555;
    }

    .project-print {
      page-break-after: always;
      margin-bottom: 3rem;
    }

    .project-print:last-child {
      page-break-after: avoid;
    }

    .project-print__header {
      margin-bottom: 1.5rem;
    }

    .project-print__title {
      font-size: 18pt;
      margin-bottom: 0.25rem;
      line-height: 1.2;
    }

    .project-print__subtitle {
      font-size: 12pt;
      color: #666;
      margin-bottom: 0.5rem;
    }

    .project-print__description {
      font-size: 11pt;
      line-height: 1.5;
      margin-bottom: 1rem;
    }

    .project-print__meta {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 1rem;
      margin-bottom: 1.5rem;
      padding: 1rem;
      background: #f9f9f9;
      font-size: 9pt;
    }

    .project-print__meta dt {
      font-weight: bold;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      margin-bottom: 0.25rem;
    }

    .project-print__meta dd {
      margin: 0;
    }

    .project-print__images {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 1rem;
      margin-bottom: 1.5rem;
    }

    .project-print__images img {
      width: 100%;
      height: auto;
      display: block;
    }

    .project-print__images figure {
      margin: 0;
      break-inside: avoid;
    }

    .project-print__images figure.full-width {
      grid-column: 1 / -1;
    }

    .project-print__content {
      font-size: 10pt;
      line-height: 1.5;
    }

    .project-print__content h3 {
      font-size: 11pt;
      margin-top: 1rem;
      margin-bottom: 0.5rem;
    }

    .project-print__content p {
      margin-bottom: 0.75rem;
    }

    .project-print__content ul,
    .project-print__content ol {
      margin-bottom: 0.75rem;
      padding-left: 1.5rem;
    }

    .portfolio-print-footer {
      margin-top: 2rem;
      padding-top: 1rem;
      border-top: 1px solid #ccc;
      font-size: 9pt;
      color: #666;
    }

    @media print {
      .portfolio-print-nav {
        display: none !important;
      }

      .portfolio-print-header {
        margin-bottom: 2rem;
        padding-bottom: 1rem;
      }

      .project-print__meta {
        background: none;
        border: 1px solid #ddd;
      }
    }
  </style>
</head>
<body>
  <nav class="portfolio-print-nav">
    <a href="{{ .Permalink }}">&larr; Back to application</a>
    <button class="portfolio-print-nav__print-btn" onclick="window.print()">Print / Save as PDF</button>
  </nav>

  <header class="portfolio-print-header">
    <h1 class="portfolio-print-header__title">Portfolio</h1>
    <p class="portfolio-print-header__subtitle">Selected works for {{ .Params.company_name | title }}</p>
  </header>

  {{/* For clients, use .Data.Pages which contains taxonomy-linked pages */}}
  {{ $projects := .Data.Pages }}

  {{ range $index, $project := $projects }}
  <article class="project-print">
    <header class="project-print__header">
      <h2 class="project-print__title">{{ $project.Title }}{{ with $project.Params.subtitle }} â€“ {{ . }}{{ end }}</h2>
      <p class="project-print__description">{{ $project.Description }}</p>
    </header>

    {{ with $project.Params.details }}
    <dl class="project-print__meta">
      {{ with .year }}
      <div>
        <dt>Year</dt>
        <dd>{{ . }}</dd>
      </div>
      {{ end }}
      {{ with .deliverables }}
      <div>
        <dt>Deliverables</dt>
        <dd>{{ . }}</dd>
      </div>
      {{ end }}
      {{ with .scope }}
      <div>
        <dt>Scope</dt>
        <dd>{{ . }}</dd>
      </div>
      {{ end }}
    </dl>
    {{ end }}

    {{/* Get images from project directory */}}
    {{ $images := $project.Resources.ByType "image" }}
    {{ if $images }}
    <div class="project-print__images">
      {{ range first 4 $images }}
      <figure{{ if eq .Name "featured.jpg" }} class="full-width"{{ end }}>
        <img src="{{ .Permalink }}" alt="{{ $.Title }}">
      </figure>
      {{ end }}
    </div>
    {{ end }}

    <div class="project-print__content prose">
      {{ $project.Content | replaceRE "<p>\\s*</p>" "" | safeHTML }}
    </div>
  </article>
  {{ end }}

  <footer class="portfolio-print-footer">
    <p>View full portfolio online: <strong>{{ .Permalink }}</strong></p>
  </footer>

  <!-- Print footer for each page -->
  <div class="print-footer">
    <span class="print-footer__label">Portfolio:</span>
    <span class="print-footer__url">{{ .Permalink }}</span>
  </div>
</body>
</html>
